<div class="top-header">
  <div class="top-header__content container">
    <div class="top-header__row top-header__row-breadcrumb">
      <app-breadcrumb
        [breadcrumbHomeItem]="breadcrumbHome"
        [breadcrumbItems]="breadcrumbItems"
      >
      </app-breadcrumb>
    </div>

    <div
      class="top-header__row top-header__row-text flex flex-row items-start justify-between gap-y-2"
    >
      <div class="top-header__col">
        <h1 class="top-header__h1 text-3xl font-semibold text text-white">
          Ordenes
        </h1>
      </div>

      <div class="top-header__col">
        <span class="top-header__span text-white font-semibold"
          >{{ paginationParams.totalRecords }} Ordenes</span
        >
      </div>
    </div>
  </div>
</div>

<div class="orders-actions container mt-[-1.5em]">
  <div
    class="orders-actions__wrapper text-gray-600 body-font shadow-slate-300 mx-auto orders-actions__cards flex flex-wrap"
  >
    @for (order of orderByStatus; let i = $index; track i) {
    <div
     
      class="orders-actions__wrapper card-stat cursor-pointer bg-white lg:max-w-[30%] w-full flex items-center justify-between px-6 py-6 shadow shadow-indigo-500/20"
    >
    <div class="orders-actions__content flex flex-row">
      <div class="card-stat__image-box">
        <img
          [src]="order.urlImage"
          alt=""
          class="w-10 h-10 object-cover object-center mr-4"
        />
      </div>

      <div class="card-stat__text">
        <h2 class="text-gray-500 title-font font-medium text-sm line-clamp-3">
          {{ order.label }}
        </h2>
        <p class="font-bold text-gray-700 text-2xl">
          {{ order.quantity }}
        </p>
      </div>
    </div>

    @if (order.typeOrders.length) {
      
      <div class="card-stat__toggle lg:hidden flex ">
        <p-button  [ngStyle]="{ transform: isOpen[i] ? 'rotate(180deg)' : '' }" (onClick)="isOpen[i] = !isOpen[i]" icon="pi pi-chevron-up" [rounded]="true" [text]="true" severity="danger " />

      </div>
    }
    </div>

    <div
      class="card-wrapper flex lg:hidden bg-slate-200 w-full flex-col px-3 py-3"
      [@isActivo]="isOpen[i]"
    >
      @for (type of order.typeOrders; track $index) {

      <div
        class="order-card shadow shadow-indigo-500/20 bg-white rounded-md w-full px-4 py-4 mb-4"
      >
        <p class="text-sm">{{ type.label }}</p>
        <p class="text-sm text-slate-500">{{ type.quantity }} ventas</p>
      </div>

      }
    </div>
    }

    <div
      [class.isOpened]="isActive"
      class="order-actions__row order-actions__row-wrapper w-full flex-wrap hidden lg:flex"
      [@isActivo]="isActive"
    >
      @for ( card of orderByStatus; track $index) {
      <div class="order-actions__row flex max-w-[30%] w-full flex-col">
        @for (type of card.typeOrders; track $index) {
        <div
          class="order-actions__col px-6 py-6 mt-4 mr-4 shadow shadow-indigo-500/20 bg-white rounded-md"
        >
          <p class="text-sm">{{ type.label }}</p>
          <p class="text-sm text-slate-500">{{ type.quantity }} ventas</p>
        </div>
        }
      </div>
      }
    </div>

    <div
      class="order-actions__toggle items-center justify-center mt-[-1em] w-full hidden lg:flex"
    >
      <button
        pButton
        pRipple
        [style]="{ height: '32px', 'border-radius': '5px' }"
        (click)="isActive = !isActive"
      >
        <i
          class="orders-actions__i pi pi-angle-down"
          [ngStyle]="{ transform: isActive ? 'rotate(180deg)' : '' }"
        >
        </i>
      </button>
    </div>
  </div>
</div>

<div class="mt-8">
  <app-order-list
    [dataOrders]="melyOrders"
    [statusData]="statusOrders"
    [totalOrders]="paginationParams.totalRecords"
    [orderOption]="ordersOption"
    (emitId)="getProductId($event)"
    (changePagination)="changedPage($event)"
  >
  </app-order-list>
</div>
