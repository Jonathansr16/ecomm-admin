<div class="top-header">
  <div class="top-header__content container-bg">
    <app-breadcrumb
      [breadcrumbHomeItem]="breadcrumHome"
      [breadcrumbItems]="breadcrumbItems"
    ></app-breadcrumb>

    <div class="wc-product__back flex items-stretch gap-4 mt-6">
      <p-button
        icon="pi pi-arrow-left"
        [rounded]="false"
        routerLink="/dashboard/woocommerce/inventario"
        [queryParams]="{page: 1, per_page: 10 }"
        
        [raised]="true"
        severity="success">
      </p-button>
      <a></a>
      <div class="wc-product__back-text">
        <p class="text-white text-xs">Regresar a Inventario</p>
        <h5 class="text-white font-semibold text-xl">Editar Producto</h5>
      </div>
    </div>
  </div>

  
</div>

@switch (wooProduct().status) {

  @case ('loading') {
    <div class="skeleton">
      <div class="skeleton__section skeleton__section--title">
        <div style="flex: 1" class="skeleton__details">
          <p-skeleton width="100%" height="2rem" styleClass="mb-3"></p-skeleton>
          <p-skeleton width="35%" height="2rem" styleClass="mb-3"></p-skeleton>
          <p-skeleton width="15%" height="2rem"></p-skeleton>
        </div>
        <div class="skeleton__img">
          <p-skeleton shape="circle" size="6rem" styleClass="mr-2"></p-skeleton>
        </div>
      </div>
      <div class="skeleton__card">
        <div class="skeleton__titular">
          <div style="flex: 1" class="skeleton__title">
            <p-skeleton
              width="30%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
            <p-skeleton
              width="80%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
          </div>
          <div class="skeleton__icon">
            <p-skeleton
              shape="circle"
              size="3rem"
              styleClass="mr-2">
            </p-skeleton>
          </div>
        </div>
      </div>
      <div class="skeleton__card">
        <div class="skeleton__titular">
          <div style="flex: 1" class="skeleton__title">
            <p-skeleton
              width="30%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
            <p-skeleton
              width="80%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
          </div>
          <div class="skeleton__icon">
            <p-skeleton
              shape="circle"
              size="3rem"
              styleClass="mr-2">
            </p-skeleton>
          </div>
        </div>
      </div>
      <div class="skeleton__card">
        <div class="skeleton__titular">
          <div style="flex: 1" class="skeleton__title">
            <p-skeleton
              width="30%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
            <p-skeleton
              width="80%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
          </div>
          <div class="skeleton__icon">
            <p-skeleton
              shape="circle"
              size="3rem"
              styleClass="mr-2">
            </p-skeleton>
          </div>
        </div>
      </div>
      <div class="skeleton__card">
        <div class="skeleton__titular">
          <div style="flex: 1" class="skeleton__title">
            <p-skeleton
              width="30%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
            <p-skeleton
              width="80%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
          </div>
          <div class="skeleton__icon">
            <p-skeleton
              shape="circle"
              size="3rem"
              styleClass="mr-2">
            </p-skeleton>
          </div>
        </div>
      </div>
      <div class="skeleton__card">
        <div class="skeleton__titular">
          <div style="flex: 1" class="skeleton__title">
            <p-skeleton
              width="30%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
            <p-skeleton
              width="80%"
              height="2rem"
              styleClass="mb-2">
            </p-skeleton>
          </div>
          <div class="skeleton__icon">
            <p-skeleton
              shape="circle"
              size="3rem"
              styleClass="mr-2">
            </p-skeleton>
          </div>
        </div>
      </div>
    </div>
  } @case('success') {
    <div class="container-bg flex justify-between gap-4 w-full">
      <p-toast 
      position="top-center" 
      key="tc">
    </p-toast>
  

      <div class="data__left w-full lg:w-3/5">
        <form action="#" class="wcform mx-auto" [formGroup]="formProduct">
          
       
          <div class="wcform__container">
        
            <div class="section-head bg-white px-6 py-8 mb-10 rounded-lg  flex flex-row flex-wrap lg:flex-nowrap justify-between items-center gap-1">
      
              <div class="section-head__col">
                  <span
                    class="section-head__store font-semibold text-sm bg-indigo-100 text-indigo-700 inline-block rounded-md px-8 py-1">
                    Woocommerce
                  </span>
                  <div class="section-head__label">
                    <a class="wcform__a text-slate-700 font-semibold text-2xl" href="#">
                      {{ wooProduct().data.name }}
                    </a>
                  </div>
                  <div class="section-head__num-product mb-2">
                    <span class="wcform__span text-sm block" href="#">#1345805537</span>
                  </div>
                </div>
  
                <div class="section-head__col">
                  <img
                    [src]="wooProduct().data.images[0].objectURL"
                    class="section-head__img w-32 h-32 mix-blend-multiply"
                    [alt]="wooProduct().data.images[0].file.name"/>
                </div>
             

            </div>
    
            <div class="section-product bg-white px-6 py-8 mb-10 rounded-lg">
              <h3 class="section-product__title text-2xl font-bold text-slate-500 pl-8 py-3">
                Datos basicos del producto 📓
              </h3>
    
              <div class="section-product__content">
                <app-expansion-panel
                  [label]="'Titulo'"
                  [isEnabled]="verifyField('name', wooProduct().data.name)"
                  [propertyProduct]="wooProduct().data.name"
                  [propertytoRequire]="'Incluye producto, marca, modelo y caraterísticas principales'"
                  (updateProduct)="updateField('name')"
                  (cancelUpdate)="cancelUpdate('name', wooProduct().data.name)">
                  <div
                    class="expansion-panel__content flex flex-col gap-3 items-start justify-start">
                    <!-- <label
                      class="form__label text-sm font-semibold text-slate-500"
                      htmlFor="title">
                      *Titulo del producto:
                    </label> -->
                    <input
                      class="form__input w-full"
                      pInputText
                      id="title"
                      placeholder="Ingrese un titulo para el producto"
                      formControlName="name"
                      #inputName
                      [maxlength]="60"
                      [style]="{ 'font-size': '14px', 'border-style': 'dashed' }"/>
    
                    @if (invalidField('name')) {
                    <small class="p-error">El titulo es obligatorio</small>
                    }
                  </div>
                </app-expansion-panel>
    
                <app-expansion-panel
                  [isEnabled]="verifyField('description', wooProduct().data.description)"
                  [label]="'Descripción del producto'"
                  [propertyProduct]="wooProduct().data.description | slice : 0 : 300"
                  [propertytoRequire]="'Describe este producto. ¿Qué lo hace único?, ¿Cuáles son sus características mas importantes?'"
                  (updateProduct)="updateField('description')">
                  <div
                  class="expansion-panel__content flex flex-col gap-3 items-start justify-start">
                    <label class="form__label text-sm font-semibold text-slate-500" htmlFor="title">
                      *Descripción del producto:
                    </label>
    
                    <textarea
                      class="wcform__textarea"
                      id="description"
                      placeholder="Descripción larga del producto"
                      formControlName="description"
                      rows="14"
                      cols="30"
                      [maxlength]="50000"
                      pInputTextarea
                      [autoResize]="true"
                      [class.is-invalid]="verifyField">
                    </textarea>
                  </div>
                </app-expansion-panel>
    
                <app-expansion-panel
                  [isEnabled]="
                    verifyField('short_description', wooProduct().data.short_description)
                  "
                  [label]="'Descripción corta del producto'"
                  [propertyProduct]="wooProduct().data.short_description | slice : 0 : 300"
                  [propertytoRequire]="
                    'Describe este producto. ¿Qué lo hace único?, ¿Cuáles son sus características mas importantes?'
                  "
                
                >
                  <div
                    class="expansion-panel__content flex flex-col gap-3 items-start justify-start"
                  >
                    <label class="form__label" htmlFor="title">
                      *descripcion corta del producto:
                    </label>
    
                    <textarea
                      class="wcform__textarea"
                      id="description"
                      placeholder="Descripción larga del producto"
                      formControlName="description"
                      rows="14"
                      cols="30"
                      [maxlength]="50000"
                      pInputTextarea
                      [autoResize]="true"
                      [class.is-invalid]="verifyField"
                    >
                    </textarea>
                  </div>
                </app-expansion-panel>
              </div>
            </div>
    
            <div class="section-inventory bg-white px-6 py-8 mb-10 rounded-lg">
    
              <h3 class="text-2xl font-bold text-slate-500 py-3">Inventario 🧑‍💻</h3>
              <span class="divider block w-full h-[1px] bg-slate-300 mb-4"></span>
      
              <app-expansion-panel
                [isEnabled]="verifyField('sku', wooProduct().data.sku)"
                [label]="'Sku del producto'"
                [propertyProduct]="wooProduct().data.sku | slice : 0 : 300"
                [propertytoRequire]="'Indica un codigo para identificar tu producto'"
              
              >
                <div
                  class="expansion-panel__content flex flex-col gap-3 items-start justify-start"
                >
                  <label class="form__label" htmlFor="title">
                    *Código de identificación del producto:
                  </label>
      
                  <input
                    class="form-product__input w-full"
                    pInputText
                    id="sku"
                    formControlName="sku"
                  />
                </div>
              </app-expansion-panel>
      
              <app-expansion-panel
                [isEnabled]="verifyField('stock', wooProduct().data.sku)"
                [label]="'Stock del producto'"
                [propertyProduct]="wooProduct().data.stock_quantity"
                [propertytoRequire]="'Indica el stock en tu almacen'"
               
              >
                <div
                  class="expansion-panel__content flex flex-col gap-3 items-start justify-start"
                >
                  <label class="form__label" htmlFor="title">
                    *Stock en inventario:
                  </label>
      
                  <input
                    class="form-product__input w-full"
                    pInputText
                    id="sku"
                    formControlName="stock_quantity"
                  />
                </div>
              </app-expansion-panel>
            </div>
    
            <div class="section-price bg-white px-6 py-8 mb-10 rounded-lg">
              <h3 class="text-2xl font-bold text-slate-700 py-3">
                Precio del producto 🪙
              </h3>
              <span class="divider block w-full h-[1px] bg-slate-300 mb-4"></span>
      
            </div>
    
        
          </div>
        </form>
    
      
      </div>

      <div class="data__right my-4 w-full lg:w-2/5">
  
        <app-upload-image [archivos]="wooProduct().data.images"></app-upload-image>
      </div>
   
    </div>
  } @case('error') {

  }
}


